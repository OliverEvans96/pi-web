---
import type { Page } from "@/payload/payload-types";
import Header from "./Header.astro";
import Paragraph from "./Paragraph.astro";
import ProductCard from "./ProductCard.astro";
import EventCard from "./EventCard.astro";

interface Props {
    block: Page["blocks"][0];
}

let { block } = Astro.props;
---

{
    (block.blockType == "Header" && <Header text={block.header} />) ||

    (block.blockType == "Paragraph" && <Paragraph text={block.text} />) ||

    // NOTE: not sure why product could be a string,
    // but typescript thinks it could
    // (according to types generated by payload)
    (block.blockType == "ProductCard" 
        && typeof block.product != "string" 
        && <ProductCard product={block.product} />) ||

    (block.blockType == "EventCard" && <EventCard title={block.title} date={block.date} price={block.price} description={block.description}/>) ||

    {console.log(`Unknown block ${JSON.stringify(block)}`)}
}
